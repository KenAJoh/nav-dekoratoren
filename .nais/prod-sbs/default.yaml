---
apiVersion: nais.io/v1alpha1
kind: Application
metadata:
    name: nav-dekoratoren
    namespace: {{namespace}}
    labels:
      team: {{team}}
spec:
    image: navikt/{{reponame}}:{{version}}
    port: 8088
    liveness:
        path: /dekoratoren/isalive
        initialDelay: 10
    readiness:
        path: /dekoratoren/isready
        initialDelay: 10
    prometheus:
        path: /metrics
    replicas:
        min: 2
        max: 4
    ingresses:
        - https://dekoratoren.nais.oera.no
        - https://www.nav.no/dekoratoren
    env:
        - name: BASE_URL
          value: https://www.nav.no
        - name: BASE_URL_APP
          value: https://www.nav.no/dekoratoren
        - name: BASE_URL_ENONIC
          value: https://www.nav.no
        - name: API_MENY_URL
          value: https://www.nav.no/_/service/no.nav.navno/menu
        - name: API_SOK_URL
          value: https://www.nav.no/_/service/navno.nav.no.search/search2
        - name: API_INNLOGGINGSLINJE_URL
          value: https://www.nav.no/innloggingslinje-api/auth
        - name: API_VARSELINNBOKS_URL
          value: https://www.nav.no/person/varselinnboks
        - name: BACKEND_MENY_URL
          value: https://www.nav.no/dekoratoren/api/meny
        - name: BACKEND_SOK_URL
          value: https://www.nav.no/dekoratoren/api/sok
        - name: MINSIDE_ARBEIDSGIVER_URL
          value: https://arbeidsgiver.nav.no/min-side-arbeidsgiver/
        - name: DITT_NAV_URL
          value: https://www.nav.no/person/dittnav/
        - name: LOGIN_URL
          value: https://loginservice.nav.no
        - name: LOGOUT_URL
          value: https://loginservice.nav.no/slo
    resources:
        limits:
            cpu: '3'
            memory: 768Mi
        requests:
            cpu: 200m
            memory: 512Mi
